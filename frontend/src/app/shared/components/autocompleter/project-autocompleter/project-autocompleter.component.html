<op-autocompleter
  [model]="value"

  [getOptionsFn]="getAvailableProjects.bind(this)"
  [trackByFn]="projectTracker"

  [multiple]="multiple"
  [focusDirectly]="focusDirectly"
  [labelForId]="labelForId"

  appendTo="body"

  (change)="writeValue($event)" 
>
  <ng-template
    op-autocompleter-label-tmp
    let-item
  >
    <span class="ng-value-label">{{ item.name }}</span>
  </ng-template>

  <ng-template
    op-autocompleter-option-tmp
    let-item
    let-search="searchTerm"
  >
    <div
      class="ng-option-label ellipsis"
      [ngStyle]="{ 'padding-left.px': item.numberOfAncestors * 20 }"
      [ngOptionHighlight]="search"
    >{{ item.name }}</div>
    <div
      *ngIf="item.disabledReason"
      class="ng-option-label ellipsis"
      [ngStyle]="{ 'padding-left.px': item.numberOfAncestors * 20 }"
    >{{ item.disabledReason }}</div>
  </ng-template>
</op-autocompleter>

<input
  [name]="name" 
  type="hidden"
  [value]="plainValue"
/>
